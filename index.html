<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Marine Insurance Application</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .section { display: none; }
        .section.active { display: block; }
        .progress-step {
            transition: all 0.3s ease;
        }
        .progress-step.completed {
            background-color: #10b981;
            color: white;
        }
        .progress-step.active {
            background-color: #3b82f6;
            color: white;
        }
        .form-input {
            transition: all 0.2s ease;
        }
        .form-input:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }
        .skip-section {
            opacity: 0.6;
            pointer-events: none;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-semibold text-gray-900">Marine Insurance Application</h1>
                <button id="saveDraftBtn" class="bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors">
                    <i class="fas fa-save mr-2"></i>Save Draft
                </button>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="bg-white border-b border-gray-200">
        <div class="max-w-4xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between mb-2">
                <span class="text-sm font-medium text-gray-700">Progress</span>
                <span id="progressText" class="text-sm text-gray-500">Step 1 of 7</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
                <div id="progressBar" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 14.28%"></div>
            </div>
            <div class="flex justify-between mt-4">
                <div class="progress-step active w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">1</div>
                <div class="progress-step w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">2</div>
                <div class="progress-step w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">3</div>
                <div class="progress-step w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">4</div>
                <div class="progress-step w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">5</div>
                <div class="progress-step w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">6</div>
                <div class="progress-step w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center text-xs font-medium">7</div>
            </div>
        </div>
    </div>

    <!-- Form Container -->
    <div class="max-w-4xl mx-auto px-4 py-8">
        <form id="marineInsuranceForm" class="bg-white rounded-xl shadow-sm border border-gray-200">
            
            <!-- Section 1: Personal Information -->
            <div class="section active p-6" data-section="1">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-user mr-3 text-blue-500"></i>Personal Information
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Name or LLC *</label>
                        <input type="text" name="name" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number *</label>
                        <input type="tel" name="phone" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email Address *</label>
                        <input type="email" name="email" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date of Birth *</label>
                        <input type="date" name="dob" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Driver's License Number *</label>
                        <input type="text" name="license" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Occupation *</label>
                        <input type="text" name="occupation" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Marital Status</label>
                        <select name="maritalStatus" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Status</option>
                            <option value="single">Single</option>
                            <option value="married">Married</option>
                            <option value="divorced">Divorced</option>
                            <option value="widowed">Widowed</option>
                            <option value="separated">Separated</option>
                        </select>
                    </div>
                </div>
                
                <!-- Address Section -->
                <h3 class="text-lg font-medium text-gray-800 mt-8 mb-4">Address Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Street Address *</label>
                        <input type="text" name="address" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Street Address Line 2</label>
                        <input type="text" name="address2" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">City *</label>
                        <input type="text" name="city" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">State/Province *</label>
                        <input type="text" name="state" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Postal/Zip Code *</label>
                        <input type="text" name="zip" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Section 2: Vessel Details -->
            <div class="section p-6" data-section="2">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-ship mr-3 text-blue-500"></i>Vessel Details
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Year of Vessel *</label>
                        <input type="number" name="vesselYear" min="1900" max="2030" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Length of Vessel *</label>
                        <input type="text" name="vesselLength" required placeholder="e.g. 24 ft" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Make of Vessel *</label>
                        <input type="text" name="vesselMake" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Model of Vessel *</label>
                        <input type="text" name="vesselModel" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Hull ID Number</label>
                        <input type="text" name="hullId" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date of Purchase</label>
                        <input type="date" name="purchaseDate" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Purchase Price *</label>
                        <input type="number" name="purchasePrice" required placeholder="$" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Hull Material</label>
                        <select name="hullMaterial" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Material</option>
                            <option value="fiberglass">Fiberglass</option>
                            <option value="aluminum">Aluminum</option>
                            <option value="steel">Steel</option>
                            <option value="wood">Wood</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Will vessel be for sale within the next 3-6 months? *</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="forSale" value="yes" required class="mr-2 text-blue-500">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="forSale" value="no" required class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 3: Engine Specifications -->
            <div class="section p-6" data-section="3">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-cog mr-3 text-blue-500"></i>Engine Specifications
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Number of Engines *</label>
                        <select name="numEngines" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Number</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="more">More than 4</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Make of Engines *</label>
                        <input type="text" name="engineMake" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Horsepower of Each Engine *</label>
                        <input type="number" name="horsepower" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Model Year of Engines *</label>
                        <input type="number" name="engineYear" min="1900" max="2030" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Model of Engines</label>
                        <input type="text" name="engineModel" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Type of Engine *</label>
                        <select name="engineType" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Type</option>
                            <option value="outboard">Outboard</option>
                            <option value="inboard">Inboard</option>
                            <option value="sterndrive">Sterndrive</option>
                            <option value="jet">Jet Drive</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Fuel Type *</label>
                        <select name="fuelType" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Fuel Type</option>
                            <option value="gas">Gasoline</option>
                            <option value="diesel">Diesel</option>
                            <option value="electric">Electric</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Engine Serial Numbers</label>
                        <input type="text" name="engineSerial" placeholder="If multiple, separate with /" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Section 4: Experience & Safety -->
            <div class="section p-6" data-section="4">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-shield-alt mr-3 text-blue-500"></i>Experience & Safety
                </h2>
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Have you owned or operated watercraft previously? *</label>
                        <div class="flex flex-wrap gap-4">
                            <label class="flex items-center">
                                <input type="radio" name="previousExperience" value="owned" required class="mr-2 text-blue-500">
                                <span>Owned</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="previousExperience" value="operated" required class="mr-2 text-blue-500">
                                <span>Operated</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="previousExperience" value="both" required class="mr-2 text-blue-500">
                                <span>Owned and Operated</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="previousExperience" value="no" required class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">What watercraft have you owned or operated previously?</label>
                        <textarea name="previousWatercraft" rows="3" placeholder="e.g. OWNED 24FT COBIA - 6YR" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Any claims or losses in the past 5 years? *</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="claims" value="yes" required class="mr-2 text-blue-500">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="claims" value="no" required class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Safety Courses or Captain's License</label>
                        <div class="grid grid-cols-2 gap-4">
                            <label class="flex items-center">
                                <input type="checkbox" name="safetyCourse" value="uscg" class="mr-2 text-blue-500">
                                <span>USCG</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="safetyCourse" value="powerSquadron" class="mr-2 text-blue-500">
                                <span>Power Squadron</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="safetyCourse" value="captains" class="mr-2 text-blue-500">
                                <span>Captain's License</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" name="safetyCourse" value="other" class="mr-2 text-blue-500">
                                <span>Other</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Additional Experience Details</label>
                        <textarea name="additionalExperience" rows="3" placeholder="USCG Safety Course, Captain's License, Boater's Safety Course, Power Squadron, etc." class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Any accidents or violations? *</label>
                        <textarea name="accidents" rows="3" placeholder="DUI, major accidents, vehicular homicide, reckless driving, etc." class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                </div>
            </div>

            <!-- Section 5: Usage & Storage -->
            <div class="section p-6" data-section="5">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-warehouse mr-3 text-blue-500"></i>Usage & Storage
                </h2>
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">How will watercraft be used? *</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <label class="flex items-center">
                                <input type="radio" name="usage" value="private" required class="mr-2 text-blue-500">
                                <span>Private</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="usage" value="privateCharter" required class="mr-2 text-blue-500">
                                <span>Private with Light Charter</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="usage" value="fullCharter" required class="mr-2 text-blue-500">
                                <span>Full Time Charter</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="usage" value="charter6pack" required class="mr-2 text-blue-500">
                                <span>Charter (6-Pack)</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="usage" value="liveaboard" required class="mr-2 text-blue-500">
                                <span>Live-Aboard</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="usage" value="other" required class="mr-2 text-blue-500">
                                <span>Other</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">How is watercraft stored? *</label>
                        <select name="storage" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Storage Method</option>
                            <option value="marina">Marina Slip</option>
                            <option value="mooring">Mooring</option>
                            <option value="trailer">Trailer</option>
                            <option value="dryStack">Dry Stack</option>
                            <option value="beach">Beach/Shore</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Address where watercraft is kept (if different from home)</label>
                        <textarea name="storageAddress" rows="3" placeholder="Include marina name and full address if different from home address" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Do you own, rent, or have business more than 4 hours/150 miles from vessel mooring?</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="distantLocation" value="yes" class="mr-2 text-blue-500">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="distantLocation" value="no" class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Do you have GPS tracking?</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="gpsTracking" value="yes" class="mr-2 text-blue-500">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="gpsTracking" value="no" class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Do you have a current survey? *</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="survey" value="yes" required class="mr-2 text-blue-500">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="survey" value="no" required class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="survey" value="getting" required class="mr-2 text-blue-500">
                                <span>No, but getting one</span>
                            </label>
                        </div>
                        <p class="text-xs text-gray-500 mt-1">If yes, please send to taylor@stacksbrokerage.com</p>
                    </div>
                </div>
            </div>

            <!-- Section 6: Coverage Requirements -->
            <div class="section p-6" data-section="6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-shield mr-3 text-blue-500"></i>Coverage Requirements
                </h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Insured Value of Watercraft (minus trailer) *</label>
                        <input type="number" name="insuredValue" required placeholder="$" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">P&I / Uninsured Boater Liability Limits *</label>
                        <select name="liabilityLimits" required class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Limit</option>
                            <option value="300000">$300,000</option>
                            <option value="500000">$500,000</option>
                            <option value="1000000">$1,000,000</option>
                            <option value="2000000">$2,000,000</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Medical Payments</label>
                        <select name="medicalPayments" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Amount</option>
                            <option value="1000">$1,000</option>
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                            <option value="25000">$25,000</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Personal Effects Coverage</label>
                        <select name="personalEffects" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option value="">Select Amount</option>
                            <option value="1000">$1,000</option>
                            <option value="2500">$2,500</option>
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Bahamas Coverage Requested? *</label>
                        <div class="flex space-x-4">
                            <label class="flex items-center">
                                <input type="radio" name="bahamasCoverage" value="yes" required class="mr-2 text-blue-500">
                                <span>Yes</span>
                            </label>
                            <label class="flex items-center">
                                <input type="radio" name="bahamasCoverage" value="no" required class="mr-2 text-blue-500">
                                <span>No</span>
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Will watercraft be financed?</label>
                        <input type="text" name="financing" placeholder="Bank name or N/A" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Additional Insured</label>
                        <input type="text" name="additionalInsured" placeholder="Marina, family member, friend that will need to be on the policy" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>
            </div>

            <!-- Section 7: Additional Details -->
            <div class="section p-6" data-section="7">
                <h2 class="text-xl font-semibold text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-plus-circle mr-3 text-blue-500"></i>Additional Details
                </h2>
                
                <!-- Trailer Insurance -->
                <div class="bg-gray-50 p-4 rounded-lg mb-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Trailer Insurance</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Would you like your trailer insured? *</label>
                            <div class="flex space-x-4">
                                <label class="flex items-center">
                                    <input type="radio" name="trailerInsurance" value="yes" required class="mr-2 text-blue-500">
                                    <span>Yes</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="trailerInsurance" value="no" required class="mr-2 text-blue-500">
                                    <span>No</span>
                                </label>
                            </div>
                        </div>
                        <div class="trailer-details" style="display: none;">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Make of Trailer</label>
                                    <input type="text" name="trailerMake" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Year of Trailer</label>
                                    <input type="number" name="trailerYear" min="1900" max="2030" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Value of Trailer</label>
                                    <input type="number" name="trailerValue" placeholder="$" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Serial Number of Trailer</label>
                                    <input type="text" name="trailerSerial" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Information -->
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Best time for us to reach you</label>
                        <input type="text" name="contactTime" placeholder="e.g. Weekdays 9-5, evenings after 6pm" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">How did you hear about us?</label>
                        <textarea name="referralSource" rows="3" placeholder="How did you hear about us? Current insurance cost? Current carrier?" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Additional Comments / Coverage Requests / Questions</label>
                        <textarea name="additionalComments" rows="4" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Interested in other insurance quotes? *</label>
                        <div class="space-y-2">
                            <p class="text-sm text-gray-600">Bundling your boat with other lines could save you money!</p>
                            <div class="grid grid-cols-2 gap-4">
                                <label class="flex items-center">
                                    <input type="checkbox" name="otherInsurance" value="auto" class="mr-2 text-blue-500">
                                    <span>Auto</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="otherInsurance" value="home" class="mr-2 text-blue-500">
                                    <span>Home</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="otherInsurance" value="business" class="mr-2 text-blue-500">
                                    <span>Business</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" name="otherInsurance" value="jewelry" class="mr-2 text-blue-500">
                                    <span>Jewelry</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Which agent assisted you?</label>
                        <input type="text" name="assistingAgent" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Agency Name (if applicable)</label>
                        <input type="text" name="agencyName" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    </div>
                </div>

                <!-- Signature and Consent -->
                <div class="border-t border-gray-200 pt-6 mt-8">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Electronic Signature *</label>
                            <input type="text" name="signature" required placeholder="Type your full name as electronic signature" class="form-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="flex items-start">
                                <input type="checkbox" name="smsOptIn" class="mr-3 mt-1 text-blue-500">
                                <span class="text-sm text-gray-700">
                                    <strong>SMS Opt-In:</strong> Yes! Stacks Brokerage may text me throughout the insurance quoting, servicing, claims, and renewal processes.
                                </span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="border-t border-gray-200 p-6">
                <div class="flex justify-between items-center">
                    <button type="button" id="prevBtn" class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-400 transition-colors" style="display: none;">
                        <i class="fas fa-arrow-left mr-2"></i>Previous
                    </button>
                    
                    <div class="flex space-x-4">
                        <button type="button" id="skipBtn" class="text-gray-500 px-4 py-2 hover:text-gray-700 transition-colors">
                            Skip Section
                        </button>
                        <button type="button" id="nextBtn" class="bg-blue-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-600 transition-colors">
                            Next <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                        <button type="submit" id="submitBtn" class="bg-green-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-green-600 transition-colors" style="display: none;">
                            <i class="fas fa-paper-plane mr-2"></i>Submit Application
                        </button>
                    </div>
                </div>
            </div>
        </form>

        <!-- Success Message -->
        <div id="successMessage" class="hidden bg-green-50 border border-green-200 rounded-xl p-6 text-center">
            <div class="text-green-600 text-5xl mb-4">
                <i class="fas fa-check-circle"></i>
            </div>
            <h3 class="text-xl font-semibold text-green-800 mb-2">Application Submitted Successfully!</h3>
            <p class="text-green-700">Thank you for your marine insurance application. We'll review your information and contact you soon.</p>
        </div>
    </div>

    <!-- Load Draft Modal -->
    <div id="loadDraftModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="display: none;">
        <div class="bg-white rounded-xl p-6 max-w-md mx-4">
            <h3 class="text-lg font-semibold mb-4">Load Saved Draft?</h3>
            <p class="text-gray-600 mb-6">We found a previously saved draft of your application. Would you like to continue where you left off?</p>
            <div class="flex space-x-4">
                <button id="loadDraftBtn" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                    Load Draft
                </button>
                <button id="startFreshBtn" class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors">
                    Start Fresh
                </button>
            </div>
        </div>
    </div>

    <script>
        class MarineInsuranceForm {
            constructor() {
                this.currentSection = 1;
                this.totalSections = 7;
                this.skippedSections = new Set();
                this.formData = {};
                this.init();
            }

            init() {
                this.bindEvents();
                this.checkForSavedDraft();
                this.updateProgress();
                this.setupTrailerInsuranceToggle();
            }

            bindEvents() {
                // Navigation buttons
                document.getElementById('nextBtn').addEventListener('click', () => this.nextSection());
                document.getElementById('prevBtn').addEventListener('click', () => this.prevSection());
                document.getElementById('skipBtn').addEventListener('click', () => this.skipSection());
                document.getElementById('saveDraftBtn').addEventListener('click', () => this.saveDraft());
                
                // Form submission
                document.getElementById('marineInsuranceForm').addEventListener('submit', (e) => this.submitForm(e));
                
                // Draft modal
                document.getElementById('loadDraftBtn').addEventListener('click', () => this.loadDraft());
                document.getElementById('startFreshBtn').addEventListener('click', () => this.startFresh());
                
                // Auto-save on input changes
                document.addEventListener('input', (e) => {
                    if (e.target.closest('#marineInsuranceForm')) {
                        this.debounce(() => this.autoSave(), 2000)();
                    }
                });
            }

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            setupTrailerInsuranceToggle() {
                const trailerRadios = document.querySelectorAll('input[name="trailerInsurance"]');
                const trailerDetails = document.querySelector('.trailer-details');
                
                trailerRadios.forEach(radio => {
                    radio.addEventListener('change', (e) => {
                        if (e.target.value === 'yes') {
                            trailerDetails.style.display = 'block';
                            trailerDetails.querySelectorAll('input').forEach(input => {
                                input.setAttribute('required', 'required');
                            });
                        } else {
                            trailerDetails.style.display = 'none';
                            trailerDetails.querySelectorAll('input').forEach(input => {
                                input.removeAttribute('required');
                                input.value = '';
                            });
                        }
                    });
                });
            }

            validateCurrentSection() {
                const currentSectionElement = document.querySelector(`.section[data-section="${this.currentSection}"]`);
                const requiredFields = currentSectionElement.querySelectorAll('[required]');
                let isValid = true;

                requiredFields.forEach(field => {
                    if (!field.value.trim() && field.type !== 'radio' && field.type !== 'checkbox') {
                        this.showFieldError(field, 'This field is required');
                        isValid = false;
                    } else if (field.type === 'radio') {
                        const radioGroup = currentSectionElement.querySelectorAll(`[name="${field.name}"]`);
                        const isChecked = Array.from(radioGroup).some(radio => radio.checked);
                        if (!isChecked) {
                            this.showFieldError(field, 'Please select an option');
                            isValid = false;
                        }
                    } else {
                        this.clearFieldError(field);
                    }
                });

                return isValid;
            }

            showFieldError(field, message) {
                this.clearFieldError(field);
                const errorDiv = document.createElement('div');
                errorDiv.className = 'text-red-500 text-xs mt-1 field-error';
                errorDiv.textContent = message;
                field.parentNode.appendChild(errorDiv);
                field.classList.add('border-red-500');
            }

            clearFieldError(field) {
                const existingError = field.parentNode.querySelector('.field-error');
                if (existingError) {
                    existingError.remove();
                }
                field.classList.remove('border-red-500');
            }

            nextSection() {
                if (this.validateCurrentSection() || this.skippedSections.has(this.currentSection)) {
                    this.saveCurrentSectionData();
                    if (this.currentSection < this.totalSections) {
                        this.currentSection++;
                        this.showSection(this.currentSection);
                        this.updateProgress();
                    }
                }
            }

            prevSection() {
                if (this.currentSection > 1) {
                    this.currentSection--;
                    this.showSection(this.currentSection);
                    this.updateProgress();
                }
            }

            skipSection() {
                this.skippedSections.add(this.currentSection);
                if (this.currentSection < this.totalSections) {
                    this.currentSection++;
                    this.showSection(this.currentSection);
                    this.updateProgress();
                    
                    // Show skip notification
                    this.showNotification('Section skipped', 'info');
                }
            }

            showSection(sectionNumber) {
                // Hide all sections
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.remove('active');
                });

                // Show current section
                const targetSection = document.querySelector(`.section[data-section="${sectionNumber}"]`);
                if (targetSection) {
                    targetSection.classList.add('active');
                }

                // Update navigation buttons
                this.updateNavigationButtons();
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            updateNavigationButtons() {
                const prevBtn = document.getElementById('prevBtn');
                const nextBtn = document.getElementById('nextBtn');
                const submitBtn = document.getElementById('submitBtn');
                const skipBtn = document.getElementById('skipBtn');

                // Show/hide previous button
                prevBtn.style.display = this.currentSection > 1 ? 'block' : 'none';

                // Show/hide next/submit buttons
                if (this.currentSection === this.totalSections) {
                    nextBtn.style.display = 'none';
                    submitBtn.style.display = 'block';
                    skipBtn.style.display = 'none';
                } else {
                    nextBtn.style.display = 'block';
                    submitBtn.style.display = 'none';
                    skipBtn.style.display = 'block';
                }
            }

            updateProgress() {
                const progressBar = document.getElementById('progressBar');
                const progressText = document.getElementById('progressText');
                const progressSteps = document.querySelectorAll('.progress-step');

                // Update progress bar
                const progressPercent = (this.currentSection / this.totalSections) * 100;
                progressBar.style.width = `${progressPercent}%`;

                // Update progress text
                progressText.textContent = `Step ${this.currentSection} of ${this.totalSections}`;

                // Update progress steps
                progressSteps.forEach((step, index) => {
                    const stepNumber = index + 1;
                    step.classList.remove('active', 'completed');
                    
                    if (stepNumber < this.currentSection) {
                        step.classList.add('completed');
                    } else if (stepNumber === this.currentSection) {
                        step.classList.add('active');
                    }
                });
            }

            saveCurrentSectionData() {
                const currentSectionElement = document.querySelector(`.section[data-section="${this.currentSection}"]`);
                const formData = new FormData(document.getElementById('marineInsuranceForm'));
                
                for (let [key, value] of formData.entries()) {
                    if (currentSectionElement.querySelector(`[name="${key}"]`)) {
                        this.formData[key] = value;
                    }
                }
            }

            saveDraft() {
                this.saveCurrentSectionData();
                const draftData = {
                    formData: this.formData,
                    currentSection: this.currentSection,
                    skippedSections: Array.from(this.skippedSections),
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('marineInsuranceDraft', JSON.stringify(draftData));
                this.showNotification('Draft saved successfully', 'success');
            }

            autoSave() {
                this.saveCurrentSectionData();
                const draftData = {
                    formData: this.formData,
                    currentSection: this.currentSection,
                    skippedSections: Array.from(this.skippedSections),
                    timestamp: new Date().toISOString()
                };
                
                localStorage.setItem('marineInsuranceDraft', JSON.stringify(draftData));
            }

            checkForSavedDraft() {
                const savedDraft = localStorage.getItem('marineInsuranceDraft');
                if (savedDraft) {
                    document.getElementById('loadDraftModal').style.display = 'flex';
                }
            }

            loadDraft() {
                const savedDraft = localStorage.getItem('marineInsuranceDraft');
                if (savedDraft) {
                    const draftData = JSON.parse(savedDraft);
                    this.formData = draftData.formData;
                    this.currentSection = draftData.currentSection;
                    this.skippedSections = new Set(draftData.skippedSections);
                    
                    // Populate form fields
                    Object.entries(this.formData).forEach(([key, value]) => {
                        const field = document.querySelector(`[name="${key}"]`);
                        if (field) {
                            if (field.type === 'radio' || field.type === 'checkbox') {
                                const specificField = document.querySelector(`[name="${key}"][value="${value}"]`);
                                if (specificField) specificField.checked = true;
                            } else {
                                field.value = value;
                            }
                        }
                    });
                    
                    this.showSection(this.currentSection);
                    this.updateProgress();
                }
                
                document.getElementById('loadDraftModal').style.display = 'none';
                this.showNotification('Draft loaded successfully', 'success');
            }

            startFresh() {
                localStorage.removeItem('marineInsuranceDraft');
                document.getElementById('loadDraftModal').style.display = 'none';
            }

            submitForm(e) {
                e.preventDefault();
                
                if (!this.validateCurrentSection()) {
                    return;
                }

                // Collect all form data
                const formData = new FormData(e.target);
                const submissionData = {};
                
                for (let [key, value] of formData.entries()) {
                    if (submissionData[key]) {
                        // Handle multiple values (checkboxes)
                        if (Array.isArray(submissionData[key])) {
                            submissionData[key].push(value);
                        } else {
                            submissionData[key] = [submissionData[key], value];
                        }
                    } else {
                        submissionData[key] = value;
                    }
                }
                
                // Add metadata
                submissionData.submissionTimestamp = new Date().toISOString();
                submissionData.skippedSections = Array.from(this.skippedSections);
                
                // Simulate form submission
                this.showLoadingState();
                
                setTimeout(() => {
                    this.hideLoadingState();
                    this.showSuccessMessage();
                    localStorage.removeItem('marineInsuranceDraft');
                    console.log('Form submitted:', submissionData);
                }, 2000);
            }

            showLoadingState() {
                const submitBtn = document.getElementById('submitBtn');
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Submitting...';
            }

            hideLoadingState() {
                const submitBtn = document.getElementById('submitBtn');
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Submit Application';
            }

            showSuccessMessage() {
                document.getElementById('marineInsuranceForm').style.display = 'none';
                document.getElementById('successMessage').classList.remove('hidden');
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white z-50 ${
                    type === 'success' ? 'bg-green-500' : 
                    type === 'error' ? 'bg-red-500' : 
                    'bg-blue-500'
                }`;
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            }
        }

        // Initialize the form when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            new MarineInsuranceForm();
        });
    </script>
</body>
</html>
